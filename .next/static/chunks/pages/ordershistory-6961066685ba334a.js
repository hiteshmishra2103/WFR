(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[887],{1513:function(r,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ordershistory",function(){return s(1396)}])},379:function(r,e,s){"use strict";s.d(e,{g:function(){return a}});var t=s(5893),d=s(3927);let a=()=>(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"100%",height:"100vh"},children:(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,t.jsx)(d.Z,{})})})},1396:function(r,e,s){"use strict";s.r(e);var t=s(5893),d=s(7294),a=s(3737),n=s.n(a),i=s(5675),o=s.n(i),l=s(1664),c=s.n(l),h=s(379),u=s(1163),_=s(4480),p=s(7533),C=s(3454);e.default=()=>{let r=(0,_.sJ)(p.K),[e,s]=(0,d.useState)([]),[a,i]=(0,d.useState)(!0),[l,O]=(0,d.useState)("all"),x=(0,u.useRouter)();if((0,d.useEffect)(()=>{let r=async()=>{try{let r=localStorage.getItem("token"),e=await fetch("".concat(C.env.NEXT_PUBLIC_SERVER_URL,"/orders/history"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}}),t=await e.json();s(t),i(!1)}catch(r){console.error(r),console.log("Server error"),i(!1)}};r()},[l]),a)return(0,t.jsx)(h.g,{});if(!r.user)return(0,t.jsx)("div",{className:n().container,children:(0,t.jsx)("h1",{className:n().title,children:"Not authorised! Login to see your orders history."})});if(!a&&0===e.length)return(0,t.jsxs)("div",{className:n().NoOrdersContainer,children:[(0,t.jsx)("h1",{className:n().NoOrder,children:"No orders Yet!"}),(0,t.jsx)(c(),{href:"/",children:(0,t.jsx)("p",{children:"Purchase Now!"})})]});{let r=e.filter(r=>"fulfilled"===l?"fulfilled"===r.status:"pending"!==l||"pending"===r.status);return(0,t.jsxs)("div",{className:n().dashboardParentContainer,children:[(0,t.jsxs)("div",{className:n().dashboardSidebar,children:[(0,t.jsx)("div",{onClick:()=>x.push("/"),children:"Home"}),(0,t.jsx)("div",{onClick:()=>x.push("/cart"),children:"Cart"}),(0,t.jsx)("div",{className:"fulfilled"===l?n().active:"",onClick:()=>O("fulfilled"),children:"Fulfilled Orders"}),(0,t.jsx)("div",{className:"pending"===l?n().active:"",onClick:()=>O("pending"),children:"Pending Orders"}),(0,t.jsx)("div",{className:"all"===l?n().active:"",onClick:()=>O("all"),children:"All Orders"})]}),(0,t.jsxs)("div",{className:n().dashboardContent,children:[(0,t.jsx)("h1",{className:n().dashboardContentHeader,children:"Orders History"}),(0,t.jsx)("div",{className:n().dashboardContentOrdersContainer,children:r.map(r=>(0,t.jsxs)("div",{className:n().dashboardContentOrdersContainerOrder,children:[(0,t.jsxs)("h1",{children:["Order Id: #",r._id]}),(0,t.jsx)("div",{className:n().productDetailsContainer,children:r.products.map(r=>(0,t.jsxs)("div",{className:n().productDetails,children:[(0,t.jsx)(o(),{className:n().productImage,src:r.product.thumbnail,alt:"product image",width:100,height:100}),(0,t.jsx)("p",{children:r.product.name}),(0,t.jsx)("p",{children:r.product.price}),(0,t.jsxs)("p",{children:["Ordered Quantity: ",r.quantity]})]},r.product._id))}),(0,t.jsxs)("p",{className:n().totalPrice,children:["Total Price: $",r.totalPrice]}),(0,t.jsxs)("p",{className:n().status,children:["Status: ",r.status]})]},r._id))})]})]})}}},3737:function(r){r.exports={dashboardParentContainer:"OrdersHistory_dashboardParentContainer__2W1Yx",dashboardSidebar:"OrdersHistory_dashboardSidebar__ZdoBN",active:"OrdersHistory_active__psVu0",dashboardContent:"OrdersHistory_dashboardContent__yeqDY",dashboardContentHeader:"OrdersHistory_dashboardContentHeader__hn1dh",dashboardContentOrdersContainer:"OrdersHistory_dashboardContentOrdersContainer__xCVVA",dashboardContentOrdersContainerOrder:"OrdersHistory_dashboardContentOrdersContainerOrder__cN2az",productDetails:"OrdersHistory_productDetails__iFn6e",totalPrice:"OrdersHistory_totalPrice__1SWPM",status:"OrdersHistory_status__pjK54",NoOrdersContainer:"OrdersHistory_NoOrdersContainer__XuuXi",NoOrder:"OrdersHistory_NoOrder__9Of5s",container:"OrdersHistory_container__FqTpa",title:"OrdersHistory_title__PiBMX",productImage:"OrdersHistory_productImage__LUl1m",productDetailsContainer:"OrdersHistory_productDetailsContainer__GZLrR"}}},function(r){r.O(0,[774,888,179],function(){return r(r.s=1513)}),_N_E=r.O()}]);