(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[230],{3524:function(e,d,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/[user]",function(){return s(6148)}])},6148:function(e,d,s){"use strict";s.r(d),s.d(d,{default:function(){return j}});var r=s(5893),a=s(7294),n=s(6154),t=s(5675),l=s.n(t),i=s(936),o=s.n(i),c=s(3927),h=s(3454);let u=async(e,d,s,r)=>{r(!0);try{await n.Z.put("".concat(h.env.NEXT_PUBLIC_SERVER_URL,"/orders/").concat(d),{status:e},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),r(!1),s()}catch(e){console.error(e),r(!1)}};var _=s(4480),p=s(7533),b=s(3985),x=s(1163),f=s(3454),j=()=>{let e=(0,x.useRouter)(),d=(0,_.sJ)(p.K),s=(0,_.sJ)(b.j),[t,i]=(0,a.useState)([]),[h,j]=(0,a.useState)(!0),[O,C]=(0,a.useState)("all"),[g,v]=(0,a.useState)(!1),m=async()=>{try{let e=localStorage.getItem("token"),d=await n.Z.get("".concat(f.env.NEXT_PUBLIC_SERVER_URL,"/orders"),{headers:{Authorization:"Bearer "+e}});i(d.data.orders),j(!1)}catch(e){console.error(e)}};return((0,a.useEffect)(()=>{m()},[g]),s)?(null==d?void 0:d.user)&&(null==d?void 0:d.user.isAdmin)?h?(0,r.jsx)("div",{className:o().loadingContainer,children:(0,r.jsx)(c.Z,{})}):(0,r.jsxs)("div",{className:o().dashboardParentContainer,children:[(0,r.jsxs)("div",{className:o().dashboardSidebar,children:[(0,r.jsx)("div",{className:"all"===O?o().active:"",onClick:()=>C("all"),children:"All Orders"}),(0,r.jsx)("div",{className:"pending"===O?o().active:"",onClick:()=>C("pending"),children:"Pending Orders"}),(0,r.jsx)("div",{className:"fulfilled"===O?o().active:"",onClick:()=>C("fulfilled"),children:"Fulfilled Orders"}),(0,r.jsx)("div",{onClick:()=>e.push("/addproduct"),children:"Add New Product"})]}),(0,r.jsxs)("div",{className:o().dashboardContent,children:[(0,r.jsxs)("div",{className:o().dashboardContentHeader,children:[(0,r.jsx)("h1",{children:"Dashboard"}),(0,r.jsx)("p",{children:"From your dashboard you can view your recent orders, pending orders, fulfilled orders."})]}),(0,r.jsx)("div",{className:o().totalOrders,children:(0,r.jsxs)("h1",{children:["Total Orders: ",t.length]})}),(0,r.jsxs)("div",{className:o().fulfilledOrders,children:[(0,r.jsx)("span",{className:o().checkMarkIcon,children:"âœ“"}),(0,r.jsxs)("h1",{children:["Fulfilled Orders: ",t.filter(e=>"fulfilled"===e.status).length]})]}),(0,r.jsxs)("div",{className:o().pendingOrders,children:[(0,r.jsx)("span",{className:o().pendingIcon,children:"!"}),(0,r.jsxs)("h1",{children:["Pending Orders: ",t.filter(e=>"pending"===e.status).length]})]}),(0,r.jsxs)("div",{className:o().dashboardContentOrders,children:[(0,r.jsxs)("h1",{children:[O.charAt(0).toUpperCase()+O.slice(1)," Orders"]}),(0,r.jsx)("div",{className:o().dashboardContentOrdersContainer,children:(e=>{let d=t.filter(d=>"fulfilled"===e?"fulfilled"===d.status:"pending"!==e||"pending"===d.status);return 0===d.length?(0,r.jsxs)("h1",{className:o().noOrders,children:["No ",e," Orders"]}):d.map(e=>(0,r.jsxs)("div",{className:o().dashboardContentOrdersContainerOrder,children:[(0,r.jsxs)("h1",{children:[" Order #",e._id]}),e.products.map(e=>(0,r.jsxs)("div",{className:o().productDetails,children:[(0,r.jsx)(l(),{alt:"product-thumbnail",src:e.product.thumbnail,width:100,height:100}),(0,r.jsx)("p",{children:e.product.name}),(0,r.jsxs)("p",{children:["Quantity: ",e.quantity]}),(0,r.jsxs)("p",{children:["Price: $",e.product.price]})]},e.product._id)),(0,r.jsxs)("p",{children:["Total: $",e.totalPrice]}),g?(0,r.jsx)(c.Z,{}):(0,r.jsxs)("select",{value:e.status,onChange:d=>{u(d.target.value,e._id,m,v)},className:o().statusInput,children:[(0,r.jsx)("option",{value:"pending",children:"pending"}),(0,r.jsx)("option",{value:"fulfilled",children:"fulfilled"})]})]},e._id))})(O)})]})]})]}):(0,r.jsxs)("div",{className:o().noAccess,children:[(0,r.jsx)("h2",{children:"Oops!"}),(0,r.jsx)("p",{children:"This page does not exist!"})]}):(0,r.jsx)("div",{className:o().loadingContainer,children:(0,r.jsx)(c.Z,{})})}},936:function(e){e.exports={noAccess:"dashboard_noAccess__G75Gs",noOrders:"dashboard_noOrders__xoXUm",dashboardParentContainer:"dashboard_dashboardParentContainer__zUa6Y",dashboardSidebar:"dashboard_dashboardSidebar__1Kwwa",fulfilledOrders:"dashboard_fulfilledOrders__86Byw",checkMarkIcon:"dashboard_checkMarkIcon__K5_U1",pendingOrders:"dashboard_pendingOrders__KJFF8",pendingIcon:"dashboard_pendingIcon__EDRcD",totalOrders:"dashboard_totalOrders__qyjRl",active:"dashboard_active__umnKB",allOrdersClass:"dashboard_allOrdersClass__gGDH7",dashboardContent:"dashboard_dashboardContent__lJJ1f",dashboardContentHeader:"dashboard_dashboardContentHeader__whZOH",dashboardContentOrders:"dashboard_dashboardContentOrders___THfX",dashboardContentOrdersContainer:"dashboard_dashboardContentOrdersContainer__OD2AS",dashboardContentOrdersContainerOrder:"dashboard_dashboardContentOrdersContainerOrder__TJzWQ",productDetails:"dashboard_productDetails__dwbuN",statusInput:"dashboard_statusInput__P8X_L",fulfilledOrdersText:"dashboard_fulfilledOrdersText__D3VGX",pendingOrdersText:"dashboard_pendingOrdersText__XHZ1j"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=3524)}),_N_E=e.O()}]);