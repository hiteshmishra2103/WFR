(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{4465:function(t,e,r){"use strict";r.d(e,{J:function(){return p}});var n="https://js.stripe.com/v3",i=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,o=function(){for(var t=document.querySelectorAll('script[src^="'.concat(n,'"]')),e=0;e<t.length;e++){var r=t[e];if(i.test(r.src))return r}return null},a=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(n).concat(e);var i=document.head||document.body;if(!i)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},c=function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"2.2.0",startTime:e})},s=null,u=function(t,e,r){if(null===t)return null;var n=t.apply(void 0,e);return c(n,r),n},d=Promise.resolve().then(function(){return null!==s?s:s=new Promise(function(t,e){if("undefined"==typeof window||"undefined"==typeof document){t(null);return}if(window.Stripe,window.Stripe){t(window.Stripe);return}try{var r=o();r||(r=a(null)),r.addEventListener("load",function(){window.Stripe?t(window.Stripe):e(Error("Stripe.js not available"))}),r.addEventListener("error",function(){e(Error("Failed to load Stripe.js"))})}catch(t){e(t);return}})}),l=!1;d.catch(function(t){l||console.warn(t)});var p=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];l=!0;var n=Date.now();return d.then(function(t){return u(t,e,n)})}},1548:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[id]",function(){return r(7428)}])},4913:function(t,e,r){"use strict";r.d(e,{Z:function(){return i}});var n=r(3454);async function i(t,e,r,i,o){try{{let a=await fetch("".concat(n.env.NEXT_PUBLIC_SERVER_URL,"/cart"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({productId:"".concat(t),quantity:+o,price:e})});if(!a.ok){let t="An error has occurred: ".concat(a.status);throw Error(t)}await a.json(),i(!0),setTimeout(()=>{i(!1)},2e3),r(t=>t+o)}}catch(t){console.error("Error: ".concat(t)),alert("Login to add to cart")}}},7428:function(t,e,r){"use strict";r.r(e);var n=r(5893),i=r(1163),o=r(6937),a=r.n(o),c=r(5675),s=r.n(c),u=r(7294),d=r(3927),l=r(4465),p=r(4913),_=r(2362),h=r(4480),f=r(7533),m=r(3454);e.default=()=>{let t=(0,i.useRouter)(),{id:e}=t.query,[r,o]=(0,u.useState)(null),c=(0,h.Zl)(_.Z),[y,v]=(0,u.useState)(!1),P=(0,h.sJ)(f.K),j=(0,u.useRef)();if((0,u.useEffect)(()=>{e&&fetch("".concat(m.env.NEXT_PUBLIC_SERVER_URL,"/products/").concat(e)).then(t=>t.json()).then(t=>o(t))},[e]),console.log(r),!r)return(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"100%",height:"100vh"},children:(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,n.jsx)(d.Z,{})})});let w=async()=>{let t=await (0,l.J)(m.env.NEXT_PUBLIC_PUBLISHABLE_KEY),e={product:[{name:r.name,price:r.price,quantity:j.current.value,productId:r._id}]};try{if(localStorage.getItem("token")){let r=await fetch("".concat(m.env.NEXT_PUBLIC_SERVER_URL,"/create-checkout-session"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(e)}),n=await r.json(),i=await t.redirectToCheckout({sessionId:n.session.id});i.error&&alert(i.error.message)}else throw Error("User token not found or localStorage not available.")}catch(t){console.error(t),alert("Error occurred while processing payment.")}},C=r.description.split(".");return(0,n.jsxs)("div",{children:[y&&(0,n.jsx)("div",{class:"notification",children:"âœ… Added to Cart "}),(0,n.jsxs)("div",{className:a().productDetailsParentContainer,children:[(0,n.jsx)("div",{className:a().productThumbnailContainer,children:(0,n.jsx)(s(),{className:a().thumbnail,src:r.thumbnail,alt:"product image",width:100,height:100})}),(0,n.jsxs)("div",{className:a().productDetails,children:[(0,n.jsxs)("div",{className:a().productNamePrice,children:[(0,n.jsxs)("p",{className:a().category,children:["Category: ",r.category]}),(0,n.jsx)("p",{className:a().productName,children:r.name}),(0,n.jsxs)("p",{className:a().price,children:["$",r.price]}),(0,n.jsx)("div",{children:C.map(t=>(0,n.jsxs)("p",{className:a().description,children:[t,"."]}))})]}),(0,n.jsxs)("div",{className:a().quantityAddToCartContainer,children:[(0,n.jsx)("div",{className:a().productQuantityContainer,children:(0,n.jsx)("input",{ref:j,type:"number",className:a().productQuantity,defaultValue:1,min:1})}),P.user?(0,n.jsx)("button",{className:a().btn,onClick:()=>{(0,p.Z)(e,r.price,c,v,+j.current.value)},children:"Add To Cart"}):(0,n.jsx)("p",{children:"Login to add this product to cart!"})]}),P.user?(0,n.jsx)("button",{className:a().buyBtn,onClick:()=>{w()},children:"Quick Buy"}):null]})]})]})}},6937:function(t){t.exports={btn:"ProductDetails_btn__9iutP",buyBtn:"ProductDetails_buyBtn__GD7gP",category:"ProductDetails_category__8L_7M",produtNamePrice:"ProductDetails_produtNamePrice__GUqvx",productDetailsParentContainer:"ProductDetails_productDetailsParentContainer__P_x89",productThumbnailContainer:"ProductDetails_productThumbnailContainer__CwbXf",thumbnail:"ProductDetails_thumbnail__yvAYN",productDetails:"ProductDetails_productDetails__p_5Pm",description:"ProductDetails_description__OPfJn",price:"ProductDetails_price__sGEWY",quantityAddToCartContainer:"ProductDetails_quantityAddToCartContainer__f3_Om",productName:"ProductDetails_productName__p2RVY",productQuantityContainer:"ProductDetails_productQuantityContainer__AiBR7",descriptionHeading:"ProductDetails_descriptionHeading__9Qb1l"}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=1548)}),_N_E=t.O()}]);