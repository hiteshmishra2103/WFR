(()=>{var t={};t.id=190,t.ids=[190,888],t.modules={7582:t=>{t.exports={removeFromCartButton:"Cart_removeFromCartButton__jpHB8",emptyCart:"Cart_emptyCart__2Eyfz",heading:"Cart_heading__zAWs7",cartDetailsParentContainer:"Cart_cartDetailsParentContainer__EynSN",cartProductHeading:"Cart_cartProductHeading__E9Ntq",cartDetailsContainer:"Cart_cartDetailsContainer__pPfIL",productThumbnailContainer:"Cart_productThumbnailContainer__b1pzY",productThumbnail:"Cart_productThumbnail__tLuDy",horizontalLine:"Cart_horizontalLine___p3Hc",cartProductCard:"Cart_cartProductCard__RP_Dl",cartTotals:"Cart_cartTotals__hUfc8",checkoutBtn:"Cart_checkoutBtn__WrzhR",btn:"Cart_btn__Qp8rP",productQuantityContainer:"Cart_productQuantityContainer__qjWfP",container:"Cart_container__Wotl5",title:"Cart_title__81RBc",productPrice:"Cart_productPrice__6qJ0V"}},6607:(t,e,r)=>{"use strict";r.a(t,async(t,a)=>{try{r.r(e),r.d(e,{config:()=>C,default:()=>p,getServerSideProps:()=>_,getStaticPaths:()=>m,getStaticProps:()=>h,reportWebVitals:()=>x,routeModule:()=>v,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>P,unstable_getStaticPaths:()=>A,unstable_getStaticProps:()=>g});var s=r(7093),i=r(5244),c=r(1323),o=r(1269),n=r(2292),u=r(5038),l=t([n]);n=(l.then?(await l)():l)[0];let d=s.PagesRouteModule,p=(0,c.l)(u,"default"),h=(0,c.l)(u,"getStaticProps"),m=(0,c.l)(u,"getStaticPaths"),_=(0,c.l)(u,"getServerSideProps"),C=(0,c.l)(u,"config"),x=(0,c.l)(u,"reportWebVitals"),g=(0,c.l)(u,"unstable_getStaticProps"),A=(0,c.l)(u,"unstable_getStaticPaths"),P=(0,c.l)(u,"unstable_getStaticParams"),j=(0,c.l)(u,"unstable_getServerProps"),S=(0,c.l)(u,"unstable_getServerSideProps"),v=new d({definition:{kind:i.x.PAGES,page:"/cart",pathname:"/cart",bundlePath:"",filename:""},components:{App:n.default,Document:o.default},userland:u});a()}catch(t){a(t)}})},5038:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>C});var a=r(997),s=r(6689),i=r(7582),c=r.n(i),o=r(5675),n=r.n(o),u=r(1163),l=r(1664),d=r.n(l),p=r(943),h=r(9755),m=r(7533),_=r(379);let C=()=>{(0,u.useRouter)();let t=(0,h.useRecoilValue)(m.K),[e,r]=(0,s.useState)(!1),[i,o]=(0,s.useState)([]),l=async()=>{try{let t=await (0,p.loadStripe)(process.env.NEXT_PUBLIC_PUBLISHABLE_KEY),e=i.products.map(t=>({name:t.product.name,price:t.product.price,quantity:t.quantity,productId:t.product._id})),r=await fetch(`${process.env.NEXT_PUBLIC_SERVER_URL}/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "},body:JSON.stringify({product:e})}),a=await r.json();await t.redirectToCheckout({sessionId:a.session.id})}catch(t){alert(t.message)}};(0,s.useEffect)(()=>{C()},[]);let C=async()=>{try{let t=await fetch(`${process.env.NEXT_PUBLIC_SERVER_URL}/cart`,{method:"GET",headers:{Authorization:"Bearer "}}),e=await t.json();o(e.cart),r(!0)}catch(t){console.log(t),r(!0)}};return e?t.user?i?.products?.length===0?a.jsx("div",{className:c().emptyCart,children:a.jsx("h1",{children:"Cart is empty!"})}):(0,a.jsxs)("div",{className:c().cartDetailsParentContainer,children:[a.jsx("h2",{className:c().heading,children:"Your Cart"}),(0,a.jsxs)("div",{className:c().cartDetailsContainer,children:[(0,a.jsxs)("div",{className:c().productsContainer,children:[(0,a.jsxs)("div",{className:c().cartProductHeading,children:[a.jsx("p",{children:"Product"}),a.jsx("p",{children:"Quantity"}),a.jsx("p",{children:"Total"}),a.jsx("p",{children:"Remove"})]}),a.jsx("hr",{className:c().horizontalLine}),i?.products?.map(t=>a.jsxs("div",{className:c().cartProductCard,children:[a.jsxs("div",{className:c().productThumbnailContainer,children:[a.jsx(n(),{className:c().productThumbnail,src:t.product.thumbnail,alt:"product image",width:100,height:100}),a.jsxs(d(),{href:`/product/${t.product._id}`,children:[a.jsx("p",{children:t.product.name}),a.jsxs("p",{className:c().productPrice,children:["$",t.product.price]})]})]}),a.jsx("div",{className:c().productQuantity,children:t.quantity}),a.jsxs("div",{className:c().productTotal,children:["$",t.quantity*t.product.price]}),a.jsx("div",{className:c().productRemove,children:a.jsx("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAO5JREFUWEftl8ENwyAMRZ83aTbpKpmk7STNJs0mzSZEKKoaBRLHiAOtzBVbfnxsjIXGljTGw38ABXgBV0XdSaCz3oBZoZMwH45BoLdAmYAC3IGbJQDwkMXv1EqACoOeCpYxSmAdaKOSrlCp9rX8DpM6LKWtlbeVZRQY95w0oJKq0gAPq86BtHfp9xUSvg05QMgljGJTN4ccaH0Fub7mCrlCmzI1v0OeQ55DnkNpv6vby+L3YaXy3kh0ZFMdSPsRavvNAfUCQ+mf+gK8tSMb9zuBqQgoOgWIUM8K00eEiOrsThwxnmm2NypRZO5Ammwz8j2OJWbP2wcAAAAASUVORK5CYII=",className:c().removeFromCartButton,onClick:async()=>{try{let e=await fetch(`${process.env.NEXT_PUBLIC_SERVER_URL}/cart/${t.product._id}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+(1?"":0)}});if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);await C()}catch(t){console.error("Error:",t)}}})})]},t.product._id))]}),(0,a.jsxs)("div",{className:c().cartTotals,children:[(0,a.jsxs)("div",{children:[a.jsx("span",{children:"Cart Total: "})," ",(0,a.jsxs)("span",{children:["$",i?.totalPrice]})]}),a.jsx("button",{className:c().btn,onClick:l,children:"Check Out"})]})]})]}):a.jsx("div",{className:c().container,children:a.jsx("h1",{className:c().title,children:"Not authorised! Login to see your cart."})}):a.jsx(_.g,{})}},9295:t=>{"use strict";t.exports=require("@mui/base/composeClasses")},7986:t=>{"use strict";t.exports=require("@mui/system")},657:t=>{"use strict";t.exports=require("@mui/utils")},943:t=>{"use strict";t.exports=require("@stripe/stripe-js")},8103:t=>{"use strict";t.exports=require("clsx")},2785:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},580:t=>{"use strict";t.exports=require("prop-types")},6689:t=>{"use strict";t.exports=require("react")},6405:t=>{"use strict";t.exports=require("react-dom")},997:t=>{"use strict";t.exports=require("react/jsx-runtime")},9755:t=>{"use strict";t.exports=require("recoil")},9648:t=>{"use strict";t.exports=import("axios")},7147:t=>{"use strict";t.exports=require("fs")},1017:t=>{"use strict";t.exports=require("path")},2781:t=>{"use strict";t.exports=require("stream")},9796:t=>{"use strict";t.exports=require("zlib")}};var e=require("../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),a=e.X(0,[966,695,859,450,292,76],()=>r(6607));module.exports=a})();